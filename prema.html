<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>For Prema — A Retro Letter</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M2 4h20v16H2z' fill='%23f4d06f' stroke='%232c2a29' stroke-width='2'/><path d='M2 4l10 9L22 4' stroke='%232c2a29' stroke-width='2' fill='none'/></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
  <meta name="description" content="A small retro-style letter from an old friend." />
  <style>
    :root{
      --paper:#f8f1df;   /* letter page ivory */
      --ink:#2b2b2b;     /* graphite */
      --ui:#2c2a29;      /* dark ui */
      --cream:#f7efe1;   /* cream */
      --accent:#c0a97a;  /* muted gold */
      --wax:#9c1f2e;     /* deep red wax */
      --wax-glow:#ff6b6b;/* warm glow */
    }
    html,body{height:100%}
    body{
      margin:0; background:linear-gradient(180deg,#e9e1cf 0%, #efe7d3 100%);
      color:var(--ui); font-family:system-ui,-apple-system,Segoe UI,Roboto,Special Elite,sans-serif;
      -webkit-font-smoothing:antialiased; position:relative; overflow:hidden;
    }
    /* Background filled with PREMA */
    body::before{
      content:"PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA PREMA ";
      position:fixed; inset:0; z-index:0; font-family:"Special Elite", monospace; font-size:36px; line-height:1.5;
      color:rgba(44,42,41,0.06); white-space:pre-wrap; word-wrap:break-word; overflow:hidden;
    }
    .stage{min-height:100dvh;display:grid;place-items:center;position:relative;z-index:1}
    .noise{position:fixed;inset:0;pointer-events:none;opacity:.06;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="160" height="160" filter="url(%23n)" opacity="1"/></svg>');mix-blend-mode:multiply;z-index:0}

    /* ===== Vintage Envelope (Option B) ===== */
    .msg-btn{appearance:none;border:none;background:transparent;cursor:pointer;animation:glowPulse 2.2s infinite ease-in-out}
    @keyframes glowPulse{0%{filter:drop-shadow(0 0 0px #d2b676)}50%{filter:drop-shadow(0 0 18px #e8cc8a)}100%{filter:drop-shadow(0 0 0px #d2b676)}}

    .envelope-vintage{position:relative;width:min(260px,80vw);aspect-ratio:4/3;margin:auto;display:block;isolation:isolate}
    /* Base paper */
    .env-base{position:absolute;inset:0;border-radius:10px;background:linear-gradient(180deg,#fff8e7 0%, #f2e4c7 100%);border:2px solid rgba(0,0,0,.25);box-shadow:0 10px 30px rgba(0,0,0,.25);overflow:hidden}
    /* subtle paper lines */
    .env-base::after{content:"";position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent 0 34px,rgba(0,0,0,.08) 34px 35px);opacity:.08;mix-blend-mode:multiply}
    /* Side flaps */
    .flap-left,.flap-right{position:absolute;top:18%;bottom:0;width:55%;background:linear-gradient(180deg,#f6e8c9,#e9d9b6);border:2px solid rgba(0,0,0,.22);}
    .flap-left{left:0;clip-path:polygon(0 0,100% 50%,100% 100%,0 100%);border-right:none}
    .flap-right{right:0;clip-path:polygon(0 50%,100% 0,100% 100%,0 100%);border-left:none}
    /* Bottom flap */
    .flap-bottom{position:absolute;left:0;right:0;bottom:0;height:45%;background:linear-gradient(180deg,#ead9b8,#e3d0ad);clip-path:polygon(0 0,50% 45%,100% 0,100% 100%,0 100%);border-top:2px solid rgba(0,0,0,.22)}
    /* Top flap */
    .flap-top{position:absolute;left:0;right:0;top:0;height:58%;background:linear-gradient(180deg,#fff1cf,#ead9b8);clip-path:polygon(0 0,100% 0,50% 70%);border-bottom:2px solid rgba(0,0,0,.25);box-shadow:inset 0 -6px 12px rgba(0,0,0,.08)}

    /* Wax seal (slightly below the center) */
    .seal{position:absolute;left:50%;top:58%;transform:translate(-50%,-50%);width:56px;height:56px;border-radius:999px;background:radial-gradient(circle at 30% 30%, #b32434 0, var(--wax) 60%, #5d0f18 100%);box-shadow:0 4px 14px rgba(156,31,46,.45), inset 0 2px 4px rgba(255,255,255,.35)}
    .seal::after{content:"DS";position:absolute;inset:0;display:grid;place-items:center;font:700 22px/1 "Special Elite", monospace;color:#fff;text-shadow:0 0 3px #000,0 2px 2px #5d0f18}

    .hint{margin-top:14px;font-size:13px;color:#6b6356;text-align:center;z-index:1;position:relative}

    /* Modal letter */
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;padding:16px;z-index:40}
    .backdrop.show{display:flex}
    .paper{position:relative;width:min(820px, 96vw);max-height:88dvh;overflow:auto;background:var(--paper);color:var(--ink);border-radius:18px;box-shadow:0 18px 48px rgba(0,0,0,.35);padding:32px 22px 26px;z-index:41}
    .paper:before{content:"";position:absolute;inset:0;border-radius:18px;background:repeating-linear-gradient(0deg, transparent, transparent 32px, rgba(0,0,0,.18) 33px);opacity:.08;pointer-events:none}
    .watermark{position:absolute;inset:0;display:grid;place-items:center;pointer-events:none;font: 100px/1 "Special Elite", monospace;color:#000;opacity:.05;letter-spacing:6px}
    header.letter h1{font-family:"Special Elite", ui-monospace, monospace;font-size:clamp(22px,5vw,30px);letter-spacing:.6px;margin:0 0 6px}
    .rule{height:1px;background:repeating-linear-gradient(90deg, rgba(0,0,0,.35) 0 8px, transparent 8px 16px);margin:8px 0 14px}
    pre.body{white-space:pre-wrap;font-family:"Special Elite", ui-monospace, monospace;font-size:18px;line-height:1.72;margin:0}
    .actions{position:sticky;bottom:-8px;margin-top:14px;display:flex;gap:8px;justify-content:flex-end;backdrop-filter:blur(3px)}
    .btn{appearance:none;border:1px solid rgba(0,0,0,.14);background:rgba(255,255,255,.85);padding:.6rem .9rem;border-radius:12px;cursor:pointer;font-weight:600}
    .btn:hover{transform:translateY(-1px)}
    footer{max-width:980px;margin:18px auto 26px;padding:0 16px;color:#6a6052;font-size:12px;text-align:center;z-index:1;position:relative}

    /* Stars (after open) */
    #stars{position:fixed;inset:0;z-index:0;display:none}
    body.stars-on #stars{display:block}

    @media (max-width:480px){.paper{padding:22px 16px}}
    @media print{body{background:white}.stage,.hint,footer,.noise{display:none}.backdrop{display:block;position:static;background:none}.paper{box-shadow:none;margin:0 auto;max-height:none}}
  </style>
</head>
<body>
  <canvas id="stars" aria-hidden="true"></canvas>
  <div class="noise" aria-hidden="true"></div>
  <main class="stage">
    <button class="msg-btn" id="openFromIcon" aria-label="Open message">
      <div class="envelope-vintage">
        <div class="env-base"></div>
        <div class="flap-left"></div>
        <div class="flap-right"></div>
        <div class="flap-bottom"></div>
        <div class="flap-top"></div>
        <div class="seal" aria-hidden="true"></div>
      </div>
    </button>
    <div class="hint">Tap the envelope to open the letter</div>
  </main>

  <!-- Modal letter -->
  <div class="backdrop" id="modal" role="dialog" aria-modal="true" aria-labelledby="L_title">
    <article class="paper">
      <div class="watermark">POST</div>
      <header class="letter">
        <h1 id="L_title">Dear Prema,</h1>
        <div class="rule"></div>
      </header>
      <section>
        <pre class="body" id="L_body">I hope you are well. It had been a long period , i had seen you last. I miss you and really want to meet you and spend some time with you. I want to know you more. I tried but couldn't make time. Our leisure time never match but i soon hope to see you soon. I hope this letter finds you well. 
With love your old friend Dip sarker.</pre>
      </section>
      <div class="actions">
        <button class="btn" id="printBtn">Print / Save PDF</button>
        <button class="btn" id="closeBtn">Close</button>
      </div>
    </article>
  </div>

  <footer>For the best view on mobile, rotate the phone to landscape when reading the letter. — Retro Letter</footer>

  <script>
    const modal=document.getElementById('modal');
    const openFromIcon=document.getElementById('openFromIcon');
    const closeBtn=document.getElementById('closeBtn');
    const printBtn=document.getElementById('printBtn');
    function openLetter(){modal.classList.add('show');document.body.classList.add('stars-on');if(!window.__starsStarted){window.__starsStarted=true;initStars();}}
    function closeLetter(){modal.classList.remove('show');}
    openFromIcon.addEventListener('click',openLetter);
    closeBtn.addEventListener('click',closeLetter);
    printBtn.addEventListener('click',()=>window.print());

    // Stars
    let ctx,W,H,stars=[];
    function initStars(){const canvas=document.getElementById('stars');ctx=canvas.getContext('2d');function resize(){const dpr=window.devicePixelRatio||1;W=canvas.width=Math.floor(innerWidth*dpr);H=canvas.height=Math.floor(innerHeight*dpr);canvas.style.width=innerWidth+'px';canvas.style.height=innerHeight+'px';const count=Math.floor((innerWidth*innerHeight)/8000);stars=new Array(count).fill(0).map(()=>({x:Math.random()*W,y:Math.random()*H,r:(Math.random()*1.4+0.4)*dpr,a:Math.random()*1,s:Math.random()*0.015+0.005}));}window.addEventListener('resize',resize);resize();function frame(){ctx.clearRect(0,0,W,H);for(const st of stars){st.a+=st.s;const alpha=0.3+Math.abs(Math.sin(st.a))*0.7;ctx.globalAlpha=alpha;ctx.beginPath();ctx.arc(st.x,st.y,st.r,0,Math.PI*2);ctx.fillStyle='#ffffff';ctx.fill();}ctx.globalAlpha=1;requestAnimationFrame(frame);}frame();}

    openFromIcon.addEventListener('keydown',e=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();openLetter();}});
  </script>
</body>
</html>
